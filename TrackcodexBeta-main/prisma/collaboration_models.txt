
model WorkspaceMember {
  id          String    @id @default(uuid())
  workspaceId String
  workspace   Workspace @relation(fields: [workspaceId], references: [id], onDelete: Cascade)
  userId      String
  user        User      @relation(fields: [userId], references: [id], onDelete: Cascade)
  role        String    // OWNER, ADMIN, WRITE, READ
  invitedBy   String?
  inviter     User?     @relation("InvitedBy", fields: [invitedBy], references: [id])
  joinedAt    DateTime  @default(now())

  @@unique([workspaceId, userId])
  @@index([workspaceId])
  @@index([userId])
}

model WorkspaceInvite {
  id          String    @id @default(uuid())
  workspaceId String
  workspace   Workspace @relation(fields: [workspaceId], references: [id], onDelete: Cascade)
  email       String
  role        String    // ADMIN, WRITE, READ
  invitedBy   String
  inviter     User      @relation(fields: [invitedBy], references: [id])
  token       String    @unique
  expiresAt   DateTime
  acceptedAt  DateTime?
  createdAt   DateTime  @default(now())

  @@index([workspaceId])
  @@index([token])
  @@index([email])
}
